@if (control.visible) {
<div [formGroup]="form">
  @switch (control.controlType) { @case ('textbox') {
  <mat-form-field appearance="outline" class="form-field">
    <mat-label>{{ control.label }}</mat-label>
    <input
      matInput
      [id]="control.key"
      [name]="control!.key"
      [type]="control.type"
      [formControlName]="control.key"
    />
    <mat-icon matPrefix>{{ control.icon }}</mat-icon>
  </mat-form-field>
  }@case ('date') {
  <mat-form-field appearance="outline" class="form-field">
    <mat-label>{{ control!.label }}</mat-label>
    <input
      matInput
      [id]="control!.key"
      [name]="control!.key"
      [type]="control!.type"
      [formControlName]="control!.key"
      [matDatepicker]="picker"
      [min]="control!.dateConfig!.minDate"
      [max]="control!.dateConfig!.maxDate"
      placeholder="Choose a date"
    />
    <mat-icon matPrefix class="material-icons-two-toned">{{
      control!.icon
    }}</mat-icon>

    <mat-datepicker-toggle
      matSuffix
      matDatepickerToggleIcon
      [for]="picker"
    ></mat-datepicker-toggle>
    <mat-datepicker
      #picker
      startView="year"
      [startAt]="control!.dateConfig!.startDate"
    ></mat-datepicker>
  </mat-form-field>
  } @case ('dropdown') {
  <mat-form-field appearance="outline" class="form-field selector-control">
    <mat-label [attr.for]="control.key">{{ control.label }}</mat-label>
    <mat-select [id]="control.key" [formControlName]="control.key">
      @for (type of control.options; track type) {
      <mat-option [value]="type?.id">{{ type?.name }}</mat-option>
      }
    </mat-select>
    <mat-icon matPrefix>{{ control.icon }}</mat-icon>
  </mat-form-field>
  } } @if (!isValid) {
  <mat-error class="errorMessage">{{ control.label }} is required</mat-error>
  }
</div>
}
<!-- <mat-hint>hint is here</mat-hint> -->
