<mat-toolbar>
  <header class="app-header app-name">
    <span class="start">IW</span><span class="end">MS</span>
  </header>
</mat-toolbar>
<header class="header">
  <h1 class="mat-headline-5 text-center">Sign Up For <strong>IWMS</strong></h1>

  <!-- <h1 class="mat-headline-5 text-center" *ngIf="!isSigningIn">
    Sign Up For
    <span class="app-name">
      <span class="start">IW</span><span class="end">MS</span>
    </span>
  </h1> -->
</header>

<!--
  Default Sign Up Layout
-->
<section class="form-container mat-typography" *ngIf="!isSigningIn">
  <form
    class="mt-4"
    novalidate
    (ngSubmit)="submitForm()"
    [formGroup]="signUpForm"
  >
    <section class="double-column">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>First Name</mat-label>
        <input
          type="text"
          name="first_name"
          formControlName="first_name"
          matInput
          placeholder="Ex. John"
        />
        <mat-icon matPrefix class="material-icons-two-toned">contacts</mat-icon>
        <mat-error *ngIf="first_name?.errors">
          <span
            class="is-danger"
            *ngIf="
              first_name?.invalid &&
              first_name?.touched &&
              first_name?.hasError('required')
            "
          >
            First Name is <strong>required*</strong>
          </span>
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Last Name</mat-label>
        <input
          type="text"
          name="last_name"
          formControlName="last_name"
          matInput
          placeholder="Ex. Doe"
        />
        <mat-icon matPrefix class="material-icons-two-toned">contacts</mat-icon>
        <mat-error *ngIf="last_name?.errors">
          <span
            class="is-danger"
            *ngIf="
              last_name?.invalid &&
              last_name?.touched &&
              last_name?.hasError('required')
            "
          >
            Last Name is <strong>required*</strong>
          </span>
        </mat-error>
      </mat-form-field>
    </section>

    <section class="double-column">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>National ID No.</mat-label>
        <input
          type="text"
          name="id_number"
          formControlName="id_number"
          matInput
          placeholder="36124568"
        />
        <mat-icon matPrefix class="material-icons-two-toned">badge</mat-icon>
        <mat-error *ngIf="id_number?.errors">
          <span
            class="is-danger"
            *ngIf="
              id_number?.invalid &&
              id_number?.touched &&
              id_number?.hasError('required')
            "
          >
            National ID No. is <strong>required*</strong>
          </span>
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Phone Number</mat-label>
        <input
          type="phone"
          name="phone_number"
          formControlName="phone_number"
          matInput
          placeholder="Ex. 07123 12312"
        />
        <mat-icon matPrefix class="material-icons-two-toned">phone</mat-icon>
        <mat-error *ngIf="phone_number?.errors">
          <span
            class="is-danger"
            *ngIf="
              phone_number?.invalid &&
              phone_number?.touched &&
              phone_number?.hasError('required')
            "
          >
            Phone Number is <strong>required*</strong>
          </span>
        </mat-error>
      </mat-form-field>
    </section>

    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Email</mat-label>
      <input
        type="email"
        name="email"
        formControlName="email"
        matInput
        placeholder="Ex. john@server.com"
      />
      <mat-icon matPrefix class="material-icons-two-toned">email</mat-icon>
      <mat-error *ngIf="email?.errors">
        <span
          class="is-danger"
          *ngIf="
            email?.invalid && email?.touched && email?.hasError('required')
          "
          >Email is <strong>required*</strong></span
        >
        <span
          class="is-danger"
          *ngIf="email?.invalid && email?.touched && email?.hasError('email')"
          >Email is invalid</span
        >
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Password</mat-label>
      <input
        type="password"
        name="password"
        formControlName="password"
        matInput
        placeholder="Ex. #123&AbC"
      />
      <mat-icon matPrefix class="material-icons-outlined">password</mat-icon>
      <mat-error *ngIf="password?.errors">
        <span
          class="is-danger"
          *ngIf="
            password?.invalid &&
            password?.touched &&
            password?.hasError('required')
          "
          >Password is <strong>required*</strong></span
        >
        <span
          class="is-danger"
          *ngIf="
            password?.invalid &&
            password?.touched &&
            password?.hasError('pattern')
          "
          >Password is weak</span
        >
        <span
          class="is-danger"
          *ngIf="
            password?.invalid &&
            password?.touched &&
            password?.hasError('minlength')
          "
          >Password is too short</span
        >
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Confirm Password</mat-label>
      <input
        type="password"
        name="confirm_password"
        formControlName="confirm_password"
        matInput
        placeholder="Ex. #123&AbC"
      />
      <mat-icon matPrefix class="material-icons-outlined">password</mat-icon>
      <mat-error *ngIf="confirm_password?.errors">
        <span
          class="is-danger"
          *ngIf="
            confirm_password?.invalid &&
            confirm_password?.touched &&
            confirm_password?.hasError('required')
          "
        >
          Confirm Password is required
        </span>
        <span
          class="is-danger"
          *ngIf="
            confirm_password?.invalid &&
            confirm_password?.touched &&
            confirm_password?.hasError('passwordsDontMatch')
          "
        >
          Passwords Don't Match </span
        >
      </mat-error>
    </mat-form-field>
    <button
      mat-flat-button
      [disabled]="signUpForm.invalid || isSubmitting"
      type="submit"
      class="w-100 mt-4 mb-1"
    >
      <mat-icon matSuffix *ngIf="!isSubmitting; else submitting"
        >how_to_reg</mat-icon
      >
      <ng-template #submitting
        ><mat-spinner diameter="30" strokeWidth="4"></mat-spinner
      ></ng-template>
      <span *ngIf="!isSubmitting">Sign Up</span>
    </button>
    <small
      >Already have an account?
      <a class="icon-link text-primary" routerLink="../sign-in"
        >Sign in <i class="bi bi-box-arrow-in-right"></i></a
    ></small>
  </form>
</section>

<!--
  Automatic Sign In After Successful Sign Up
-->

<section
  class="container h-100 d-flex flex-column align-items-center justify-content-center"
  *ngIf="isSigningIn"
>
  <section class="loader">
    <mat-spinner color="accent"></mat-spinner>
  </section>
  <header class="mat-small text-center">Signing In</header>
</section>
